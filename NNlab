#!/bin/bash

. ~/NNlab/NNlab.sh

(
AAP=`which aap`
if [ ! -x "$AAP" ] ; then
    AAP=$NNlab_path/bin/aap
fi
if [ ! -x "$AAP" ] ; then
    echo "ERROR: AAP not installed!"
fi

cd $NNlab_path

if [ $# -eq 0 ] ; then
    if [ "`basename -- $0`" == "NNlab" ] ; then
        exec bash
    fi
else

    CMD=$1
    shift

    case $CMD in
    getsrc|update|build|install|doc)
	PACKAGE=$1
#        if [ ! -e $PACKAGE.aap ] ; then
	$AAP -f NNlab.aap $PACKAGE.aap
#	fi
	$AAP -f $PACKAGE.aap $CMD
	;;
    *)
	exec $1 "$*"
	;;
    esac

    if [ "$CMD" == "install" ] ; then 
	if [ -e ~/mnt/local/NNlab ] ; then
	    unison NNlab_local
	fi
    fi
fi
)
